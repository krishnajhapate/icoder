{% extends 'base.html' %}
{% block title %}Blog
{% endblock title  %}
{% block body %}
<div class="container">

  <h2>Blogposts by iCoder</h2>

  {% for posts in allPosts %}
  <div class="container">
    <div
      class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 my-3 shadow-sm h-md-250 position-relative">
      <div class="col-md-12 p-4 d-flex flex-column position-static">
        <strong class="d-inline-block mb-2 text-primary">Article by {{posts.author}}</strong>
        <h3 class="mb-0"><a class="text-dark" href="/blog/{{posts.slug}}">{{posts.title}}</a></h3>
        <div class="mb-1 text-muted">{{posts.timestamp}}</div>
        <p class="card-text mb-auto">
        <div class="previews">{{posts.content|safe|truncatewords:80}}</div>
      </div>
      </p>
      <div class="my-2 mx-auto col-md-12">
        <a href="/blog/{{posts.slug}}" role='button' class="btn btn-primary">Continue reading</a>
      </div>
    </div>
  </div>
</div>
  {% endfor %}
</div>

{% endblock body %}
{% block js %}
<script>
  let previews = document.getElementsByClassName('previews');
  Array.from(previews).forEach((element) => {
    element.innerHTML = element.innerText;
  })
</script>
{% endblock js %}